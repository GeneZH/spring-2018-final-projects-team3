<!DOCTYPE html>
<html>

<head>
    <title>Project 3</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>
    <link rel="stylesheet" type="text/css" href="finalproject.css"></link>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDu1gZ0iuhX8XWlJQJL6q8HQ_GsF9YiFcE&callback=initMap">
    </script>
</head>

<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <p class="navbar-brand" href="#">Project 3</p>
                <a class="navbar-brand" href="#" id="mapLink">Country</a>
                <a class="navbar-brand" href="#" id="vis1Link">Vis1</a>
                <a class="navbar-brand" href="#" id="vis2Link">Vis2</a>
                <a class="navbar-brand" href="#" id="vis3Link">Vis3</a>
            </div>
        </div>
    </nav>
    <div id="map" style="margin-top: 70px; margin-bottom: 10px;">

    </div>
    <script>
    // $('#mapLink').click(function() { scrollTo("map"); return false; });
    // $('#vis1Link').click(function() { scrollTo("Vis1"); return false; });
    // $('#vis2Link').click(function() { scrollTo("Vis2"); return false; });
    //
    // function scrollTo(id) {
    //     $('html,body').animate({
    //             scrollTop: $("#" + id).offset().top - 80
    //         },
    //         'slow');
    // }
    function initMap() {
        var denver_cord = {lat: 39.754136, lng: -105.001440};
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 14,
            center: denver_cord
          });

        //draw bus routes
        var directionsService = new google.maps.DirectionsService();
        var start = [{lat: 39.745485,lng:  -105.003603}, {lat: 39.738037, lng: -105.026520}];
        var end = [{lat: 39.707838, lng: -104.818461 }, {lat: 39.726484, lng:  -104.850277}];
        for(var i = 0; i < start.length; i++) {
            console.log(start[i]);
            requestDirections(start[i], end[i]);
        }

        //draw realtime bus
        bus_cord = [{lat: 39.745485, lng: -105.003603}];
        displayBus(bus_cord[0])

        function renderDirections(result, status) {
          var directionsRenderer = new google.maps.DirectionsRenderer();
          directionsRenderer.setMap(map);
          if (status == 'OK') {
             directionsRenderer.setDirections(result);
          }
        }

        function requestDirections(start, end) {
          directionsService.route({
            origin: start,
            destination: end,
            travelMode: 'TRANSIT',
            transitOptions: {
              modes: ['BUS'],
            }
          }, function(result, status) {
            renderDirections(result, status);
          });
        }

        function displayBus(cord) {
            icon = 'bus.png';
            features = [{
                position: cord,
                type: 'info'
            }];
            // Create markers.
            features.forEach(function(feature) {
              var marker = new google.maps.Marker({
                position: feature.position,
                icon: icon,
                map: map
              });
            });
        }
    }


    </script>
    <footer class="navbar navbar-inverse navbar-static-bottom">
        <center class="navbar-brand">Team 3:</center>
        <center class="navbar-brand">Chih-Wei Lin</center>
        <center class="navbar-brand">Yijun Zhang</center>
        <center class="navbar-brand">Yuhan Lin</center>
    </footer>
</body>

</html>
